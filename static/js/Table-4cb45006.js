import{E as U,m as T,_ as q,r as d,o as r,c as _,a as e,w as t,e as f,F as C,h as D,g as y,d as x,b as w,t as H}from"./index-89208e9a.js";import W from"./Pic-8928c7cd.js";const $={data(){return{formData:{型号1:"",型号2:"",标识:"",版号:"",片号:"",检验批号:"",生产批号:"",备注:"",目检合格数:"",筛选单状态:"",收费状态:"",是否合检:""}}},methods:{getUniqueOptions(l){const a={};return this.data.forEach(h=>{const u=h[l];u!=null&&(a[u]||(a[u]=h))}),Object.values(a)},submitForm(){const l=this.formData;console.log(l),this.$http.post("http://127.0.0.1:8000/api/upload",l,{headers:{"Content-Type":"application/json"}}).then(a=>{console.log("Request succeeded"),U({message:"提交成功",type:"success"})}).catch(a=>{console.error("Request failed:",a),U({message:"提交失败",type:"error"})}),setTimeout(()=>{this.$emit("childEvent")},1e3)}}},R={data(){return{}},methods:{handleChildEvent(){this.$http.get("http://127.0.0.1:8000/api/data").then(l=>{for(let a=0;a<l.data.data.length;a++)this.data[a]=l.data.data[a],this.data[a].产品负责人="孙纽佳",this.data[a].联系电话="1910";this.total=l.data.data.length,this.pageSizes=[10,20,this.total],this.updateDisplayData(),console.log(this.data)}).catch(l=>{console.error("Error fetching data:",l)})},handleSelectionChange(l){this.selection=l,l&&this.selection.length!=0&&(console.log("Selected Data:",this.selection),this.selectedData=this.selection)},handleTypeChange(l,a){return a.型号1===l},handleNameChange(l,a){return a.型号2===l},handleFilterChange(l,a){return a.筛选单状态===l},handleChargeChange(l,a){return a.收费状态===l},handleCheckChange(l,a){return a.是否合检===l},getUniqueOptions(l){const a={};this.data.forEach(h=>{const u=h[l];u!=null&&(a[u]||(a[u]=h))});const m=Object.values(a);if(l=="型号1"){let h=[];for(let u=0;u<m.length;u++)h.push({text:m[u].型号1,value:m[u].型号1});return h}if(l=="型号2"){let h=[];for(let u=0;u<m.length;u++)h.push({text:m[u].型号2,value:m[u].型号2});return h}}}};const K={mixins:[$],data(){return{}},props:["data"],computed:{...T(["addDialog"])},methods:{closeDialog(){this.$store.commit("changeAddDialog",!1),this.$refs.form.resetFields(),this.$refs.upload_excel.clearFiles(),this.$refs.upload_image.clearFiles()},uploadImage(){this.$refs.upload_image.submit()},handleImageSuccess(l){console.log(l),this.formData=l.data},uploadExcel(){this.$refs.upload_excel.submit()},handleExcelSuccess(l){console.log(l),this.formData=l.data[0]},handleSubmitForm(){this.submitForm(),this.$store.commit("changeAddDialog",!1),this.$refs.form.resetFields(),this.$refs.upload_excel.clearFiles(),this.$refs.upload_image.clearFiles()}}};function Q(l,a,m,h,u,i){const v=d("el-button"),k=d("el-upload"),b=d("el-row"),s=d("el-option"),c=d("el-select"),g=d("el-form-item"),V=d("el-col"),S=d("el-form"),n=d("el-dialog");return r(),_("div",null,[e(n,{title:"输入表单",modelValue:l.addDialog,"onUpdate:modelValue":a[12]||(a[12]=o=>l.addDialog=o),onClose:i.closeDialog},{default:t(()=>[e(S,{ref:"form",model:l.formData,"label-width":"100px"},{default:t(()=>[e(b,null,{default:t(()=>[f(" 通过上传图像文件自动填充： "),e(k,{ref:"upload_image",class:"upload-image",action:"http://127.0.0.1:8000/api/uploadImage","auto-upload":!1,"on-success":i.handleImageSuccess},{default:t(()=>[e(v,{slot:"trigger",type:"primary"},{default:t(()=>[f("选择文件")]),_:1})]),_:1},8,["on-success"]),e(v,{type:"success",onClick:i.uploadImage},{default:t(()=>[f("上传")]),_:1},8,["onClick"])]),_:1}),e(b,null,{default:t(()=>[f(" 通过上传Excel文件自动填充： "),e(k,{ref:"upload_excel",class:"upload-image",action:"http://127.0.0.1:8000/api/uploadExcel","auto-upload":!1,"on-success":i.handleExcelSuccess},{default:t(()=>[e(v,{slot:"trigger",type:"primary"},{default:t(()=>[f("选择文件")]),_:1})]),_:1},8,["on-success"]),e(v,{type:"success",onClick:i.uploadExcel},{default:t(()=>[f("上传")]),_:1},8,["onClick"])]),_:1}),e(b,null,{default:t(()=>[e(V,{span:8},{default:t(()=>[e(g,{label:"型号1",prop:"型号1"},{default:t(()=>[e(c,{modelValue:l.formData.型号1,"onUpdate:modelValue":a[0]||(a[0]=o=>l.formData.型号1=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("型号1"),o=>(r(),y(s,{key:o.id,label:o.型号1,value:o.型号1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(V,{span:8},{default:t(()=>[e(g,{label:"型号2",prop:"型号2"},{default:t(()=>[e(c,{modelValue:l.formData.型号2,"onUpdate:modelValue":a[1]||(a[1]=o=>l.formData.型号2=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("型号2"),o=>(r(),y(s,{key:o.id,label:o.型号2,value:o.型号2},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(V,{span:8},{default:t(()=>[e(g,{label:"标识",prop:"标识"},{default:t(()=>[e(c,{modelValue:l.formData.标识,"onUpdate:modelValue":a[2]||(a[2]=o=>l.formData.标识=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("标识"),o=>(r(),y(s,{key:o.id,label:o.标识,value:o.标识},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(V,{span:12},{default:t(()=>[e(g,{label:"版号",prop:"版号"},{default:t(()=>[e(c,{modelValue:l.formData.版号,"onUpdate:modelValue":a[3]||(a[3]=o=>l.formData.版号=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("版号"),o=>(r(),y(s,{key:o.id,label:o.版号,value:o.版号},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(V,{span:12},{default:t(()=>[e(g,{label:"片号",prop:"片号"},{default:t(()=>[e(c,{modelValue:l.formData.片号,"onUpdate:modelValue":a[4]||(a[4]=o=>l.formData.片号=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("片号"),o=>(r(),y(s,{key:o.id,label:o.片号,value:o.片号},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(V,{span:12},{default:t(()=>[e(g,{label:"检验批号",prop:"检验批号"},{default:t(()=>[e(c,{modelValue:l.formData.检验批号,"onUpdate:modelValue":a[5]||(a[5]=o=>l.formData.检验批号=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("检验批号"),o=>(r(),y(s,{key:o.id,label:o.检验批号,value:o.检验批号},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(V,{span:12},{default:t(()=>[e(g,{label:"生产批号",prop:"生产批号"},{default:t(()=>[e(c,{modelValue:l.formData.生产批号,"onUpdate:modelValue":a[6]||(a[6]=o=>l.formData.生产批号=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("生产批号"),o=>(r(),y(s,{key:o.id,label:o.生产批号,value:o.生产批号},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,{label:"备注",prop:"备注"},{default:t(()=>[e(c,{modelValue:l.formData.备注,"onUpdate:modelValue":a[7]||(a[7]=o=>l.formData.备注=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("备注"),o=>(r(),y(s,{key:o.id,label:o.备注,value:o.备注},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"目检合格数",prop:"目检合格数"},{default:t(()=>[e(c,{modelValue:l.formData.目检合格数,"onUpdate:modelValue":a[8]||(a[8]=o=>l.formData.目检合格数=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("目检合格数"),o=>(r(),y(s,{key:o.id,label:o.目检合格数,value:o.目检合格数},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(V,{span:8},{default:t(()=>[e(g,{label:"筛选单状态",prop:"筛选单状态"},{default:t(()=>[e(c,{modelValue:l.formData.筛选单状态,"onUpdate:modelValue":a[9]||(a[9]=o=>l.formData.筛选单状态=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("筛选单状态"),o=>(r(),y(s,{key:o.id,label:o.筛选单状态,value:o.筛选单状态},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(V,{span:8},{default:t(()=>[e(g,{label:"收费状态",prop:"收费状态"},{default:t(()=>[e(c,{modelValue:l.formData.收费状态,"onUpdate:modelValue":a[10]||(a[10]=o=>l.formData.收费状态=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("收费状态"),o=>(r(),y(s,{key:o.id,label:o.收费状态,value:o.收费状态},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(V,{span:8},{default:t(()=>[e(g,{label:"是否合检",prop:"是否合检"},{default:t(()=>[e(c,{modelValue:l.formData.是否合检,"onUpdate:modelValue":a[11]||(a[11]=o=>l.formData.是否合检=o),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("是否合检"),o=>(r(),y(s,{key:o.id,label:o.是否合检,value:o.是否合检},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(v,{type:"primary",onClick:i.handleSubmitForm},{default:t(()=>[f("提交")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","onClose"])])}const X=q(K,[["render",Q],["__scopeId","data-v-81f25b35"]]);const Y={mixins:[R],data(){return{data:[],selection:[],idsToSubmit:[]}},computed:{...T(["addExcelDialog"])},methods:{closeDialog(){this.$store.commit("changeAddExcelDialog",!1),this.data=[],this.$refs.upload_excel.clearFiles()},uploadExcel(){this.$refs.upload_excel.submit()},handleExcelSuccess(l){console.log(l),this.data=l.data;for(let a=0;a<l.data.length;a++)this.data[a].产品负责人="孙纽佳",this.data[a].联系电话="1910"},submitForm(){if(this.selection.length>0){for(let l=0;l<this.selection.length;l++)this.idsToSubmit.push(this.selection[l]),console.log(this.idsToSubmit);this.$http.post("http://127.0.0.1:8000/api/submit",{ids:this.idsToSubmit}).then(l=>{console.log("Request succeeded"),U({message:"提交成功",type:"success"})}).catch(l=>{console.error("Request failed:",l),U({message:"提交失败",type:"error"})})}else U({message:"提交项不能为空",type:"warning"});this.$store.commit("changeAddExcelDialog",!1),this.data=[],this.$refs.upload_excel.clearFiles(),setTimeout(()=>{this.$emit("childEvent")},1e3)}}};function Z(l,a,m,h,u,i){const v=d("el-button"),k=d("el-upload"),b=d("el-row"),s=d("el-table-column"),c=d("el-table"),g=d("el-divider"),V=d("el-dialog");return r(),_("div",null,[e(V,{title:"文件添加表单",modelValue:l.addExcelDialog,"onUpdate:modelValue":a[0]||(a[0]=S=>l.addExcelDialog=S),onClose:i.closeDialog},{default:t(()=>[e(b,null,{default:t(()=>[f(" 通过上传Excel文件自动填充： "),e(k,{ref:"upload_excel",class:"upload-image",action:"http://127.0.0.1:8000/api/uploadExcel","auto-upload":!1,"on-success":i.handleExcelSuccess},{default:t(()=>[e(v,{slot:"trigger",type:"primary"},{default:t(()=>[f("选择文件")]),_:1})]),_:1},8,["on-success"]),e(v,{type:"success",onClick:i.uploadExcel},{default:t(()=>[f("上传")]),_:1},8,["onClick"])]),_:1}),e(c,{data:u.data,style:{width:"100%"},selection:u.selection,onSelectionChange:l.handleSelectionChange},{default:t(()=>[e(s,{type:"selection",width:"50"}),e(s,{type:"index",width:"50"}),e(s,{label:""},{default:t(()=>[e(s,{prop:"型号1",label:"产品型号",filters:l.getUniqueOptions("型号1"),"filter-method":l.handleTypeChange},null,8,["filters","filter-method"]),e(s,{prop:"型号2",label:"产品名称",filters:l.getUniqueOptions("型号2"),"filter-method":l.handleNameChange},null,8,["filters","filter-method"]),e(s,{prop:"筛选单状态",label:"筛选单状态",filters:[{text:"拟制中",value:"拟制中"},{text:"未完成",value:"未完成"},{text:"已完成",value:"已完成"}],"filter-method":l.handleFilterChange},null,8,["filter-method"]),e(s,{prop:"收费状态",label:"收费状态",filters:[{text:"未收费",value:"未收费"},{text:"已收费",value:"已收费"}],"filter-method":l.handleChargeChange},null,8,["filter-method"]),e(s,{prop:"是否合检",label:"是否合检",filters:[{text:"是",value:"是"},{text:"否",value:"否"}],"filter-method":l.handleCheckChange},null,8,["filter-method"])]),_:1}),e(s,{label:"申请单信息","header-align":"center"},{default:t(()=>[e(s,{prop:"产品负责人",label:"产品负责人"}),e(s,{prop:"联系电话",label:"联系电话"}),e(s,{prop:"生产批号",label:"生产批号"}),e(s,{prop:"检验批号",label:"检验批号"})]),_:1})]),_:1},8,["data","selection","onSelectionChange"]),e(g),e(v,{type:"primary",onClick:i.submitForm},{default:t(()=>[f("提交")]),_:1},8,["onClick"])]),_:1},8,["modelValue","onClose"])])}const ee=q(Y,[["render",Z],["__scopeId","data-v-a51ba875"]]),le={data(){return{radio1:3,radio2:6,textarea:"",card_item:"filter",tableData:[{name:"内部目检",method:" GJB8481",status:"试验",unit:"第十六业务部",group:"工艺一部"},{name:"随机振动",method:"GJB8481",status:"试验",unit:"检测中心",group:"环境部"},{name:"25电特性",method:"GJB8481",status:"测试",unit:"第十六专业部",group:"1602室测试组"},{name:"温度循环",method:"GJB8481",status:"试验",unit:"检测中心",group:"环境组"}]}},props:{data:Array},computed:{...T(["editDialog"])},methods:{closeDialog(){this.$store.commit("changeEditDialog",!1)},submitForm(){console.log("表单数据:",this.formData),this.$store.commit("changeEditDialog",!1)},deleteRow(l){console.log(l),this.tableData.splice(l,1)},onAddItem(){this.tableData.push({name:"温度循环",method:"GJB8471",status:"试验",unit:"检测中心",group:"环境组"})}}},ae=w("div",{class:"bar1"},"筛选项目",-1),te=w("div",{class:"bar1"},"结果与意见",-1),oe=w("br",null,null,-1);function ne(l,a,m,h,u,i){const v=d("el-input"),k=d("el-form-item"),b=d("el-col"),s=d("el-row"),c=d("el-form"),g=d("el-divider"),V=d("el-table-column"),S=d("el-button"),n=d("el-table"),o=d("el-radio"),O=d("el-radio-group"),F=d("el-upload"),I=d("el-dialog");return r(),_("div",null,[e(I,{title:"编辑表单",modelValue:l.editDialog,"onUpdate:modelValue":a[12]||(a[12]=p=>l.editDialog=p),onClose:i.closeDialog},{default:t(()=>[e(c,{"label-width":"100px"},{default:t(()=>[e(s,null,{default:t(()=>[e(b,{span:8},{default:t(()=>[e(k,{label:"型号1"},{default:t(()=>[e(v,{modelValue:m.data[0].型号1,"onUpdate:modelValue":a[0]||(a[0]=p=>m.data[0].型号1=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{span:8},{default:t(()=>[e(k,{label:"型号2"},{default:t(()=>[e(v,{modelValue:m.data[0].型号2,"onUpdate:modelValue":a[1]||(a[1]=p=>m.data[0].型号2=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{span:8},{default:t(()=>[e(k,{label:"标识"},{default:t(()=>[e(v,{modelValue:m.data[0].标识,"onUpdate:modelValue":a[2]||(a[2]=p=>m.data[0].标识=p)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(b,{span:8},{default:t(()=>[e(k,{label:"版号"},{default:t(()=>[e(v,{modelValue:m.data[0].版号,"onUpdate:modelValue":a[3]||(a[3]=p=>m.data[0].版号=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{span:8},{default:t(()=>[e(k,{label:"片号"},{default:t(()=>[e(v,{modelValue:m.data[0].片号,"onUpdate:modelValue":a[4]||(a[4]=p=>m.data[0].片号=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{span:8},{default:t(()=>[e(k,{label:"检验批号"},{default:t(()=>[e(v,{modelValue:m.data[0].检验批号,"onUpdate:modelValue":a[5]||(a[5]=p=>m.data[0].检验批号=p)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(s,null,{default:t(()=>[e(b,{span:8},{default:t(()=>[e(k,{label:"生产批号"},{default:t(()=>[e(v,{modelValue:m.data[0].生产批号,"onUpdate:modelValue":a[6]||(a[6]=p=>m.data[0].生产批号=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{span:8},{default:t(()=>[e(k,{label:"备注"},{default:t(()=>[e(v,{modelValue:m.data[0].备注,"onUpdate:modelValue":a[7]||(a[7]=p=>m.data[0].备注=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(b,{span:8},{default:t(()=>[e(k,{label:"目检合格数"},{default:t(()=>[e(v,{modelValue:m.data[0].目检合格数,"onUpdate:modelValue":a[8]||(a[8]=p=>m.data[0].目检合格数=p)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),ae,e(g),e(n,{data:u.tableData,style:{width:"100%"},"max-height":"250"},{default:t(()=>[e(V,{type:"index",label:"序号",width:"75"}),e(V,{prop:"name",label:"项目名称"}),e(V,{prop:"method",label:"筛选方法"}),e(V,{prop:"status",label:"筛选项目性质"}),e(V,{prop:"unit",label:"承担任务部门"}),e(V,{prop:"group",label:"承担任务组别"}),e(V,{fixed:"right",label:"操作",width:"120"},{default:t(p=>[e(S,{link:"",type:"primary",size:"small",onClick:x(z=>i.deleteRow(p.$index),["prevent"])},{default:t(()=>[f(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(S,{class:"mt-4",style:{width:"100%"},onClick:i.onAddItem},{default:t(()=>[f("添加项目")]),_:1},8,["onClick"]),f(" 综合判定： "),e(O,{modelValue:u.radio1,"onUpdate:modelValue":a[9]||(a[9]=p=>u.radio1=p)},{default:t(()=>[e(o,{label:3},{default:t(()=>[f("合格")]),_:1}),e(o,{label:6},{default:t(()=>[f("不合格")]),_:1}),e(o,{label:9},{default:t(()=>[f("待定")]),_:1})]),_:1},8,["modelValue"]),e(F,{class:"upload-demo",action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15","auto-upload":!1},{trigger:t(()=>[f(" 上传报告： "),e(S,{type:"primary"},{default:t(()=>[f("选择文件")]),_:1}),e(S,{class:"ml-3",type:"success",onClick:l.submitUpload},{default:t(()=>[f("上传文件")]),_:1},8,["onClick"])]),_:1}),te,e(g),f(" 是否满足筛选条件： "),e(O,{modelValue:u.radio2,"onUpdate:modelValue":a[10]||(a[10]=p=>u.radio2=p)},{default:t(()=>[e(o,{label:3},{default:t(()=>[f("是")]),_:1}),e(o,{label:6},{default:t(()=>[f("否")]),_:1})]),_:1},8,["modelValue"]),oe,f("填写意见： "),e(v,{modelValue:u.textarea,"onUpdate:modelValue":a[11]||(a[11]=p=>u.textarea=p),rows:5,type:"textarea",placeholder:"请填写相关意见"},null,8,["modelValue"])]),_:1},8,["modelValue","onClose"])])}const de=q(le,[["render",ne]]);const ue={mixins:[$],data(){return{mediaStream:null}},props:["data"],computed:{...T(["addCameraDialog"])},methods:{closeDialog(){this.$store.commit("changeAddCameraDialog",!1),this.$refs.form.resetFields(),this.stopCamera()},captureCamera(){navigator.mediaDevices.getUserMedia({video:!0}).then(l=>{this.mediaStream=l;const a=this.$refs.videoRef;a.srcObject=l,a.play()}).catch(l=>{console.error("获取摄像头权限失败:",l)})},stopCamera(){this.mediaStream&&(this.mediaStream.getTracks().forEach(l=>l.stop()),this.mediaStream=null)},uploadCamera(){const l=this.$refs.videoRef,a=document.createElement("canvas"),m=a.getContext("2d");a.width=l.videoWidth,a.height=l.videoHeight,m.drawImage(l,0,0,a.width,a.height),a.toBlob(h=>{const u=new FormData;u.append("photo",h,"captured_image.jpg"),this.$http.post("http://127.0.0.1:8000/api/capture",u).then(i=>{console.log("照片保存成功"),console.log(i.data.data),this.formData=i.data.data}).catch(i=>{console.error("保存照片失败:",i)})},"image/jpeg"),this.stopCamera()},handleSubmitForm(){this.submitForm(),this.$store.commit("changeAddCameraDialog",!1),this.$refs.form.resetFields()}}},se={class:"upload-image"},re={ref:"videoRef",width:"640",height:"480",autoplay:""};function ie(l,a,m,h,u,i){const v=d("el-button"),k=d("el-row"),b=d("el-option"),s=d("el-select"),c=d("el-form-item"),g=d("el-col"),V=d("el-form"),S=d("el-dialog");return r(),_("div",null,[e(S,{title:"镜头输入表单",modelValue:l.addCameraDialog,"onUpdate:modelValue":a[12]||(a[12]=n=>l.addCameraDialog=n),onClose:i.closeDialog},{default:t(()=>[e(V,{ref:"form",model:l.formData,"label-width":"100px"},{default:t(()=>[e(k,null,{default:t(()=>[f(" 通过摄像头拍摄自动填充： "),w("div",se,[e(v,{type:"primary",onClick:i.captureCamera},{default:t(()=>[f("打开摄像头")]),_:1},8,["onClick"]),w("video",re,null,512),e(v,{type:"success",onClick:i.uploadCamera},{default:t(()=>[f("拍摄上传")]),_:1},8,["onClick"])])]),_:1}),e(k,null,{default:t(()=>[e(g,{span:8},{default:t(()=>[e(c,{label:"型号1",prop:"型号1"},{default:t(()=>[e(s,{modelValue:l.formData.型号1,"onUpdate:modelValue":a[0]||(a[0]=n=>l.formData.型号1=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("型号1"),n=>(r(),y(b,{key:n.id,label:n.型号1,value:n.型号1},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,{span:8},{default:t(()=>[e(c,{label:"型号2",prop:"型号2"},{default:t(()=>[e(s,{modelValue:l.formData.型号2,"onUpdate:modelValue":a[1]||(a[1]=n=>l.formData.型号2=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("型号2"),n=>(r(),y(b,{key:n.id,label:n.型号2,value:n.型号2},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,{span:8},{default:t(()=>[e(c,{label:"标识",prop:"标识"},{default:t(()=>[e(s,{modelValue:l.formData.标识,"onUpdate:modelValue":a[2]||(a[2]=n=>l.formData.标识=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("标识"),n=>(r(),y(b,{key:n.id,label:n.标识,value:n.标识},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(g,{span:12},{default:t(()=>[e(c,{label:"版号",prop:"版号"},{default:t(()=>[e(s,{modelValue:l.formData.版号,"onUpdate:modelValue":a[3]||(a[3]=n=>l.formData.版号=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("版号"),n=>(r(),y(b,{key:n.id,label:n.版号,value:n.版号},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,{span:12},{default:t(()=>[e(c,{label:"片号",prop:"片号"},{default:t(()=>[e(s,{modelValue:l.formData.片号,"onUpdate:modelValue":a[4]||(a[4]=n=>l.formData.片号=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("片号"),n=>(r(),y(b,{key:n.id,label:n.片号,value:n.片号},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(k,null,{default:t(()=>[e(g,{span:12},{default:t(()=>[e(c,{label:"检验批号",prop:"检验批号"},{default:t(()=>[e(s,{modelValue:l.formData.检验批号,"onUpdate:modelValue":a[5]||(a[5]=n=>l.formData.检验批号=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("检验批号"),n=>(r(),y(b,{key:n.id,label:n.检验批号,value:n.检验批号},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,{span:12},{default:t(()=>[e(c,{label:"生产批号",prop:"生产批号"},{default:t(()=>[e(s,{modelValue:l.formData.生产批号,"onUpdate:modelValue":a[6]||(a[6]=n=>l.formData.生产批号=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("生产批号"),n=>(r(),y(b,{key:n.id,label:n.生产批号,value:n.生产批号},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,{label:"备注",prop:"备注"},{default:t(()=>[e(s,{modelValue:l.formData.备注,"onUpdate:modelValue":a[7]||(a[7]=n=>l.formData.备注=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("备注"),n=>(r(),y(b,{key:n.id,label:n.备注,value:n.备注},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"目检合格数",prop:"目检合格数"},{default:t(()=>[e(s,{modelValue:l.formData.目检合格数,"onUpdate:modelValue":a[8]||(a[8]=n=>l.formData.目检合格数=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("目检合格数"),n=>(r(),y(b,{key:n.id,label:n.目检合格数,value:n.目检合格数},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(k,null,{default:t(()=>[e(g,{span:8},{default:t(()=>[e(c,{label:"筛选单状态",prop:"筛选单状态"},{default:t(()=>[e(s,{modelValue:l.formData.筛选单状态,"onUpdate:modelValue":a[9]||(a[9]=n=>l.formData.筛选单状态=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("筛选单状态"),n=>(r(),y(b,{key:n.id,label:n.筛选单状态,value:n.筛选单状态},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,{span:8},{default:t(()=>[e(c,{label:"收费状态",prop:"收费状态"},{default:t(()=>[e(s,{modelValue:l.formData.收费状态,"onUpdate:modelValue":a[10]||(a[10]=n=>l.formData.收费状态=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("收费状态"),n=>(r(),y(b,{key:n.id,label:n.收费状态,value:n.收费状态},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(g,{span:8},{default:t(()=>[e(c,{label:"是否合检",prop:"是否合检"},{default:t(()=>[e(s,{modelValue:l.formData.是否合检,"onUpdate:modelValue":a[11]||(a[11]=n=>l.formData.是否合检=n),placeholder:"",filterable:"","allow-create":"",clearable:""},{default:t(()=>[(r(!0),_(C,null,D(l.getUniqueOptions("是否合检"),n=>(r(),y(b,{key:n.id,label:n.是否合检,value:n.是否合检},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(c,null,{default:t(()=>[e(v,{type:"primary",onClick:i.handleSubmitForm},{default:t(()=>[f("提交")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","onClose"])])}const me=q(ue,[["render",ie],["__scopeId","data-v-82bcc48f"]]);const pe={components:{AddItem:X,EditItem:de,ExcelSubmit:ee,Pic:W,CameraSubmit:me},mixins:[R],data(){return{card_item:"option1",data:[],displayData:[],selectedData:[],selection:[],idsToDelete:[],idsToExport:[],idsToSubmit:[],currentPage:1,pageSizes:[10],pageSize:10,total:0}},computed:{getIndex(){return l=>(this.currentPage-1)*this.pageSize+l+1}},methods:{handleEdit(l,a){this.$router.push("/system-manage/option1/filter"),this.$store.commit("setCardIndex",l)},handleDelete(l,a){this.$http.post("http://127.0.0.1:8000/api/delete",{ids:[a.id]}).then(m=>{console.log("Request succeeded"),this.data=[],this.$http.get("http://127.0.0.1:8000/api/data").then(h=>{for(let u=0;u<h.data.data.length;u++)this.data[u]=h.data.data[u],this.data[u].产品负责人="孙纽佳",this.data[u].联系电话="1910",this.total=h.data.data.length,this.updateDisplayData();console.log(this.data)}).catch(h=>{console.error("Error fetching data:",h)}),U({message:"删除成功",type:"success"})}).catch(m=>{console.error("Request failed:",m),U({message:"删除失败",type:"error"})})},handleTabClick(l){switch(l){case"添加":this.$store.commit("changeAddDialog",!0);break;case"Excel文件添加":this.$store.commit("changeAddExcelDialog",!0);break;case"批量照片上传添加":console.log("success"),this.$store.commit("changeAddPicDialog",!0);break;case"镜头拍摄添加":this.$store.commit("changeAddCameraDialog",!0);break;case"编辑":this.selection.length==0?U({message:"编辑项不能为空",type:"warning"}):this.selection.length>1?U({message:"不能同时编辑多项",type:"warning"}):(this.$store.commit("changeEditDialog",!0),console.log(l));break;case"删除":if(this.selection.length>0){for(let a=0;a<this.selection.length;a++)this.idsToDelete.push(this.selection[a].id),console.log(this.idsToDelete);this.$http.post("http://127.0.0.1:8000/api/delete",{ids:this.idsToDelete}).then(a=>{console.log("Request succeeded"),this.data=[],this.$http.get("http://127.0.0.1:8000/api/data").then(m=>{for(let h=0;h<m.data.data.length;h++)this.data[h]=m.data.data[h],this.data[h].产品负责人="孙纽佳",this.data[h].联系电话="1910";console.log(this.data)}).catch(m=>{console.error("Error fetching data:",m)}),U({message:"删除成功",type:"success"})}).catch(a=>{console.error("Request failed:",a),U({message:"删除失败",type:"error"})})}else U({message:"删除项不能为空",type:"warning"});break;case"提交":U({message:"暂未实现",type:"warning"});break;case"导出":if(this.selection.length>0){for(let a=0;a<this.selection.length;a++)this.idsToExport.push(this.selection[a].id),console.log(this.idsToExport);this.$http.post("http://127.0.0.1:8000/api/export",{ids:this.idsToExport},{responseType:"blob"}).then(a=>{const m=new Blob([a.data],{type:a.headers["content-type"]}),h="export_data.xlsx",u=window.URL.createObjectURL(m),i=document.createElement("a");i.href=u,i.download=h,i.click(),window.URL.revokeObjectURL(u),U({message:"导出成功",type:"success"})}).catch(a=>{console.error("请求失败",a)})}else U({message:"导出项不能为空",type:"warning"});break;case"刷新":location.reload();break}},updateDisplayData(){const l=(this.currentPage-1)*this.pageSize,a=l+this.pageSize;this.displayData=this.data.slice(l,a)},handleSizeChange(l){this.pageSize=l,this.currentPage=1,this.updateDisplayData()},handleCurrentChange(l){this.currentPage=l,this.updateDisplayData()}},mounted(){this.$http.get("http://127.0.0.1:8000/api/data").then(l=>{console.log(l.data.data[0]);for(let a=0;a<l.data.data.length;a++)this.data[a]=l.data.data[a],this.data[a].产品负责人="孙纽佳",this.data[a].联系电话="1910";this.total=l.data.data.length,this.pageSizes=[10,20,this.total],this.updateDisplayData(),console.log(this.data)}).catch(l=>{console.error("Error fetching data:",l)})}},fe={class:"card-header"};function ce(l,a,m,h,u,i){const v=d("el-breadcrumb-item"),k=d("el-breadcrumb"),b=d("EditPen"),s=d("el-icon"),c=d("el-tab-pane"),g=d("FolderOpened"),V=d("VideoCamera"),S=d("Edit"),n=d("Delete"),o=d("Finished"),O=d("Document"),F=d("Refresh"),I=d("el-tabs"),p=d("el-table-column"),z=d("el-button"),A=d("el-table"),P=d("el-pagination"),B=d("el-card"),j=d("AddItem"),M=d("ExcelSubmit"),N=d("Pic"),G=d("CameraSubmit"),J=d("EditItem");return r(),_(C,null,[e(B,{class:"box-card"},{header:t(()=>[w("div",fe,[e(k,{separator:">"},{default:t(()=>[e(v,{to:{path:"/system-manage/home"}},{default:t(()=>[f(" homepage ")]),_:1}),e(v,null,{default:t(()=>[f(H(u.card_item),1)]),_:1})]),_:1})])]),default:t(()=>[e(I,{type:"card"},{default:t(()=>[e(c,null,{label:t(()=>[w("span",{class:"custom-tabs-label",onClick:a[0]||(a[0]=E=>i.handleTabClick("添加"))},[e(s,null,{default:t(()=>[e(b)]),_:1}),f(" 添加 ")])]),_:1}),e(c,null,{label:t(()=>[w("span",{class:"custom-tabs-label",onClick:a[1]||(a[1]=E=>i.handleTabClick("Excel文件添加"))},[e(s,null,{default:t(()=>[e(g)]),_:1}),f(" Excel文件添加 ")])]),_:1}),e(c,null,{label:t(()=>[w("span",{class:"custom-tabs-label",onClick:a[2]||(a[2]=E=>i.handleTabClick("批量照片上传添加"))},[e(s,null,{default:t(()=>[e(g)]),_:1}),f(" 批量照片上传添加 ")])]),_:1}),e(c,null,{label:t(()=>[w("span",{class:"custom-tabs-label",onClick:a[3]||(a[3]=E=>i.handleTabClick("镜头拍摄添加"))},[e(s,null,{default:t(()=>[e(V)]),_:1}),f(" 镜头拍摄添加 ")])]),_:1}),e(c,null,{label:t(()=>[w("span",{class:"custom-tabs-label",onClick:a[4]||(a[4]=E=>i.handleTabClick("编辑"))},[e(s,null,{default:t(()=>[e(S)]),_:1}),f(" 编辑 ")])]),_:1}),e(c,null,{label:t(()=>[w("span",{class:"custom-tabs-label",onClick:a[5]||(a[5]=E=>i.handleTabClick("删除"))},[e(s,null,{default:t(()=>[e(n)]),_:1}),f(" 删除 ")])]),_:1}),e(c,null,{label:t(()=>[w("span",{class:"custom-tabs-label",onClick:a[6]||(a[6]=E=>i.handleTabClick("提交"))},[e(s,null,{default:t(()=>[e(o)]),_:1}),f(" 提交 ")])]),_:1}),e(c,null,{label:t(()=>[w("span",{class:"custom-tabs-label",onClick:a[7]||(a[7]=E=>i.handleTabClick("导出"))},[e(s,null,{default:t(()=>[e(O)]),_:1}),f(" 导出 ")])]),_:1}),e(c,null,{label:t(()=>[w("span",{class:"custom-tabs-label",onClick:a[8]||(a[8]=E=>i.handleTabClick("刷新"))},[e(s,null,{default:t(()=>[e(F)]),_:1}),f(" 刷新 ")])]),_:1})]),_:1}),e(A,{data:u.displayData,style:{width:"100%"},selection:u.selection,onSelectionChange:l.handleSelectionChange,"row-key":"id"},{default:t(()=>[e(p,{type:"selection","reserve-selection":"",width:"50"}),e(p,{type:"index",index:i.getIndex,width:"50"},null,8,["index"]),e(p,{label:""},{default:t(()=>[e(p,{prop:"型号1",label:"产品型号",filters:l.getUniqueOptions("型号1"),"filter-method":l.handleTypeChange},null,8,["filters","filter-method"]),e(p,{prop:"型号2",label:"产品名称",filters:l.getUniqueOptions("型号2"),"filter-method":l.handleNameChange},null,8,["filters","filter-method"]),e(p,{prop:"筛选单状态",label:"筛选单状态",filters:[{text:"拟制中",value:"拟制中"},{text:"未完成",value:"未完成"},{text:"已完成",value:"已完成"}],"filter-method":l.handleFilterChange},null,8,["filter-method"]),e(p,{prop:"收费状态",label:"收费状态",filters:[{text:"未收费",value:"未收费"},{text:"已收费",value:"已收费"}],"filter-method":l.handleChargeChange},null,8,["filter-method"]),e(p,{prop:"是否合检",label:"是否合检",filters:[{text:"是",value:"是"},{text:"否",value:"否"}],"filter-method":l.handleCheckChange},null,8,["filter-method"])]),_:1}),e(p,{label:"申请单信息","header-align":"center"},{default:t(()=>[e(p,{prop:"产品负责人",label:"产品负责人"}),e(p,{prop:"联系电话",label:"联系电话"}),e(p,{prop:"生产批号",label:"生产批号"}),e(p,{prop:"检验批号",label:"检验批号"})]),_:1}),e(p,{fixed:"right",label:"操作","header-align":"center",width:"100"},{default:t(E=>[e(z,{link:"",type:"primary",size:"small",onClick:L=>i.handleEdit(E.$index,E.row)},{default:t(()=>[f("编辑")]),_:2},1032,["onClick"]),e(z,{link:"",type:"primary",size:"small",onClick:L=>i.handleDelete(E.$index,E.row)},{default:t(()=>[f("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","selection","onSelectionChange"]),e(P,{onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange,"current-page":u.currentPage,"page-sizes":u.pageSizes,"page-size":u.pageSize,layout:"sizes, prev, pager, next, jumper",total:u.total,style:{"margin-top":"20px"}},null,8,["onSizeChange","onCurrentChange","current-page","page-sizes","page-size","total"])]),_:1}),e(j,{onChildEvent:l.handleChildEvent,data:u.data},null,8,["onChildEvent","data"]),e(M,{onChildEvent:l.handleChildEvent},null,8,["onChildEvent"]),e(N,{onChildEvent:l.handleChildEvent},null,8,["onChildEvent"]),e(G,{onChildEvent:l.handleChildEvent,data:u.data},null,8,["onChildEvent","data"]),e(J,{data:u.selectedData},null,8,["data"])],64)}const ge=q(pe,[["render",ce],["__scopeId","data-v-b887008b"]]);export{ge as default};
