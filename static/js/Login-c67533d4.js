import{_ as V,E as m,r as l,o as v,c as x,a as e,w as a,b as i,d as C,e as h,p as I,f as k}from"./index-89208e9a.js";const S={data(){return{username:"",password:"",captcha:"",captchaImageUrl:""}},mounted(){this.refreshCaptcha()},methods:{refreshCaptcha(){this.captchaImageUrl=`http://127.0.0.1:8000/api/captcha?timestamp=${Date.now()}`,this.captcha=""},login(){const n=this.username,t=this.password,r=new FormData;r.append("username",n),r.append("password",t),r.append("captcha",this.captcha),this.$http.post("http://127.0.0.1:8000/api/login",r).then(p=>{if(p.status==400)m({message:"验证码不正确",type:"error"}),this.captcha="";else if(p.status===401)m({message:"登录失败，请检查用户名和密码",type:"error"});else{const o=p.data.access_token;localStorage.setItem("authToken",o),this.$router.push("/home")}}).catch(p=>{m({message:"登录失败",type:"error"})})}}},U=n=>(I("data-v-99b7efaa"),n=n(),k(),n),q={class:"login-container"},B={class:"login"},D=U(()=>i("h2",{style:{color:"white","text-align":"center","padding-bottom":"10px"}},"物流管理系统登陆",-1)),E=["src"];function N(n,t,r,p,o,c){const u=l("el-input"),d=l("el-form-item"),f=l("Refresh"),g=l("el-icon"),_=l("el-button"),w=l("el-form"),y=l("el-col"),b=l("el-row");return v(),x("div",q,[e(b,{type:"flex",justify:"center",align:"middle",style:{height:"100vh"}},{default:a(()=>[e(y,{span:24},{default:a(()=>[i("div",B,[D,e(w,{onSubmit:C(c.login,["prevent"]),"label-position":"top"},{default:a(()=>[e(d,{label:"用户名:",required:""},{default:a(()=>[e(u,{modelValue:o.username,"onUpdate:modelValue":t[0]||(t[0]=s=>o.username=s)},null,8,["modelValue"])]),_:1}),e(d,{label:"密码:",required:""},{default:a(()=>[e(u,{type:"password",modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=s=>o.password=s)},null,8,["modelValue"])]),_:1}),e(d,{label:"验证码:",required:""},{default:a(()=>[e(u,{modelValue:o.captcha,"onUpdate:modelValue":t[2]||(t[2]=s=>o.captcha=s)},null,8,["modelValue"]),i("img",{src:o.captchaImageUrl,onClick:t[3]||(t[3]=(...s)=>c.refreshCaptcha&&c.refreshCaptcha(...s)),alt:"验证码"},null,8,E),i("div",{style:{"padding-left":"10px"},onClick:t[4]||(t[4]=(...s)=>c.refreshCaptcha&&c.refreshCaptcha(...s))},[e(_,{type:"info"},{default:a(()=>[e(g,null,{default:a(()=>[e(f)]),_:1}),h("点击刷新")]),_:1})])]),_:1}),e(d,null,{default:a(()=>[e(_,{type:"primary","native-type":"submit"},{default:a(()=>[h("登录")]),_:1})]),_:1})]),_:1},8,["onSubmit"])])]),_:1})]),_:1})])}const M=V(S,[["render",N],["__scopeId","data-v-99b7efaa"]]);export{M as default};
